(function(c){var b="particleground";function a(e,h){var d=e;var F=c(e);var x=!!document.createElement("canvas").getContext;var g;var u;var C=[];var E;var p=0;var m=0;var o;var v;var A=!navigator.userAgent.match(/(iPhone|iPod|iPad|Android|BlackBerry|BB10|mobi|tablet|opera mini|nexus 7)/i);var f=!!window.DeviceOrientationEvent;var t=0;var s=0;var B=false;h=c.extend({},c.fn[b].defaults,h);function w(){if(!x){return}$canvas=c('<canvas class="pg-canvas"></canvas>');F.prepend($canvas);g=$canvas[0];u=g.getContext("2d");j();var G=Math.round((g.width*g.height)/h.density);for(var H=0;H<G;H++){var I=new y();I.setStackPos(H);C.push(I)}c(window).on("resize",function(){z()});c(document).on("mousemove",function(J){p=J.pageX;m=J.pageY});if(f&&!A){window.addEventListener("deviceorientation",function(){s=Math.min(Math.max(-event.beta,-30),30);t=Math.min(Math.max(-event.gamma,-30),30)},true)}q();n("onInit")}function j(){g.width=F.width();g.height=F.height();u.fillStyle=h.dotColor;u.strokeStyle=h.lineColor;u.lineWidth=h.lineWidth}function q(){if(!x){return}o=c(window).width();v=c(window).height();u.clearRect(0,0,g.width,g.height);for(var G=0;G<C.length;G++){C[G].updatePosition()}for(var G=0;G<C.length;G++){C[G].draw()}if(!B){E=requestAnimationFrame(q)}}function z(){j();for(i=C.length-1;i>=0;i--){if(C[i].position.x>F.width()||C[i].position.y>F.height()){C.splice(i,1)}}var G=Math.round((g.width*g.height)/h.density);if(G>C.length){while(G>C.length){var H=new y();C.push(H)}}else{if(G<C.length){C.splice(G)}}for(i=C.length-1;i>=0;i--){C[i].setStackPos(i)}}function l(){B=true}function k(){B=false;q()}function y(){this.stackPos;this.active=true;this.layer=Math.ceil(Math.random()*3);this.parallaxOffsetX=0;this.parallaxOffsetY=0;this.position={x:Math.ceil(Math.random()*g.width),y:Math.ceil(Math.random()*g.height)};this.speed={};switch(h.directionX){case"left":this.speed.x=+(-h.maxSpeedX+(Math.random()*h.maxSpeedX)-h.minSpeedX).toFixed(2);break;case"right":this.speed.x=+((Math.random()*h.maxSpeedX)+h.minSpeedX).toFixed(2);break;default:this.speed.x=+((-h.maxSpeedX/2)+(Math.random()*h.maxSpeedX)).toFixed(2);this.speed.x+=this.speed.x>0?h.minSpeedX:-h.minSpeedX;break}switch(h.directionY){case"up":this.speed.y=+(-h.maxSpeedY+(Math.random()*h.maxSpeedY)-h.minSpeedY).toFixed(2);break;case"down":this.speed.y=+((Math.random()*h.maxSpeedY)+h.minSpeedY).toFixed(2);break;default:this.speed.y=+((-h.maxSpeedY/2)+(Math.random()*h.maxSpeedY)).toFixed(2);this.speed.x+=this.speed.y>0?h.minSpeedY:-h.minSpeedY;break}}y.prototype.draw=function(){u.beginPath();u.arc(this.position.x+this.parallaxOffsetX,this.position.y+this.parallaxOffsetY,h.particleRadius/2,0,Math.PI*2,true);u.closePath();u.fill();u.beginPath();for(var I=C.length-1;I>this.stackPos;I--){var J=C[I];var H=this.position.x-J.position.x;var G=this.position.y-J.position.y;var K=Math.sqrt((H*H)+(G*G)).toFixed(2);if(K<h.proximity){u.moveTo(this.position.x+this.parallaxOffsetX,this.position.y+this.parallaxOffsetY);if(h.curvedLines){u.quadraticCurveTo(Math.max(J.position.x,J.position.x),Math.min(J.position.y,J.position.y),J.position.x+J.parallaxOffsetX,J.position.y+J.parallaxOffsetY)}else{u.lineTo(J.position.x+J.parallaxOffsetX,J.position.y+J.parallaxOffsetY)}}}u.stroke();u.closePath()};y.prototype.updatePosition=function(){if(h.parallax){if(f&&!A){var G=(o-0)/(30- -30);pointerX=(t- -30)*G+0;var H=(v-0)/(30- -30);pointerY=(s- -30)*H+0}else{pointerX=p;pointerY=m}this.parallaxTargX=(pointerX-(o/2))/(h.parallaxMultiplier*this.layer);this.parallaxOffsetX+=(this.parallaxTargX-this.parallaxOffsetX)/10;this.parallaxTargY=(pointerY-(v/2))/(h.parallaxMultiplier*this.layer);this.parallaxOffsetY+=(this.parallaxTargY-this.parallaxOffsetY)/10}switch(h.directionX){case"left":if(this.position.x+this.speed.x+this.parallaxOffsetX<0){this.position.x=F.width()-this.parallaxOffsetX}break;case"right":if(this.position.x+this.speed.x+this.parallaxOffsetX>F.width()){this.position.x=0-this.parallaxOffsetX}break;default:if(this.position.x+this.speed.x+this.parallaxOffsetX>F.width()||this.position.x+this.speed.x+this.parallaxOffsetX<0){this.speed.x=-this.speed.x}break}switch(h.directionY){case"up":if(this.position.y+this.speed.y+this.parallaxOffsetY<0){this.position.y=F.height()-this.parallaxOffsetY}break;case"down":if(this.position.y+this.speed.y+this.parallaxOffsetY>F.height()){this.position.y=0-this.parallaxOffsetY}break;default:if(this.position.y+this.speed.y+this.parallaxOffsetY>F.height()||this.position.y+this.speed.y+this.parallaxOffsetY<0){this.speed.y=-this.speed.y}break}this.position.x+=this.speed.x;this.position.y+=this.speed.y};y.prototype.setStackPos=function(G){this.stackPos=G};function r(G,H){if(H){h[G]=H}else{return h[G]}}function D(){F.find(".pg-canvas").remove();n("onDestroy");F.removeData("plugin_"+b)}function n(G){if(h[G]!==undefined){h[G].call(d)}}w();return{option:r,destroy:D,start:k,pause:l}}c.fn[b]=function(f){if(typeof arguments[0]==="string"){var d=arguments[0];var e=Array.prototype.slice.call(arguments,1);var g;this.each(function(){if(c.data(this,"plugin_"+b)&&typeof c.data(this,"plugin_"+b)[d]==="function"){g=c.data(this,"plugin_"+b)[d].apply(this,e)}});if(g!==undefined){return g}else{return this}}else{if(typeof f==="object"||!f){return this.each(function(){if(!c.data(this,"plugin_"+b)){c.data(this,"plugin_"+b,new a(this,f))}})}}};c.fn[b].defaults={minSpeedX:0.1,maxSpeedX:0.7,minSpeedY:0.1,maxSpeedY:0.7,directionX:"center",directionY:"center",density:10000,dotColor:"#666666",lineColor:"#666666",particleRadius:7,lineWidth:1,curvedLines:false,proximity:100,parallax:true,parallaxMultiplier:5,onInit:function(){},onDestroy:function(){}}})(jQuery);(function(){var b=0;var c=["ms","moz","webkit","o"];for(var a=0;a<c.length&&!window.requestAnimationFrame;++a){window.requestAnimationFrame=window[c[a]+"RequestAnimationFrame"];window.cancelAnimationFrame=window[c[a]+"CancelAnimationFrame"]||window[c[a]+"CancelRequestAnimationFrame"]}if(!window.requestAnimationFrame){window.requestAnimationFrame=function(h,e){var d=new Date().getTime();var f=Math.max(0,16-(d-b));var g=window.setTimeout(function(){h(d+f)},f);b=d+f;return g}}if(!window.cancelAnimationFrame){window.cancelAnimationFrame=function(d){clearTimeout(d)}}}());
